{"version":3,"file":"index.min.js","sources":["../src/utils/shallowEqual.ts","../src/utils/getDiff.ts","../src/utils/bindActions.ts","../src/svelte/components/connect.ts"],"sourcesContent":["export default function shallowEqual(a, b) {\n  for (const i in a) if (a[i] !== b[i]) return false\n  for (const i in b) if (!(i in a)) return false\n  return true\n}\n","import shallowEqual from \"./shallowEqual\"\r\n\r\nfunction differs(a, b) {\r\n  if (a && typeof a === \"object\") {\r\n    return !shallowEqual(a, b)\r\n  }\r\n  return a !== b\r\n}\r\n\r\nexport default function getDiff(newData, oldData) {\r\n  const diff = {}\r\n  let changed = false\r\n  for (let key in newData) {\r\n    if (differs(oldData[key], newData[key])) {\r\n      changed = true\r\n      diff[key] = newData[key]\r\n    }\r\n  }\r\n  return { diff, changed }\r\n}\r\n","export default function bindActions(actions, store) {\n  let bound = {}\n  for (let name in actions) {\n    bound[name] = (...args) => {\n      let ret = actions[name](store.getState(), ...args)\n      if (ret != null) store.setState(ret)\n    }\n  }\n  return bound\n}\n","import getDiff from \"../../utils/getDiff\"\r\nimport bindActions from \"../../utils/bindActions\"\r\n\r\nexport function getActions(store, actions) {\r\n  return bindActions(\r\n    typeof actions === \"function\" ? actions(store) : actions,\r\n    store\r\n  )\r\n}\r\n\r\nexport function connect(component, store, mapToProps) {\r\n  update()\r\n  component.on(\"destroy\", store.subscribe(update))\r\n  function update() {\r\n    const { diff, changed } = getDiff(\r\n      mapToProps(store.getState()),\r\n      component.get()\r\n    )\r\n    if (changed) {\r\n      component.set(diff)\r\n    }\r\n  }\r\n}\r\n"],"names":["a","b","i","shallowEqual","newData","oldData","diff","changed","key","differs","actions","store","bound","name_1","_i","args","ret","getState","setState","component","mapToProps","_a","set","update","on","subscribe","bindActions"],"mappings":"2MAAqCA,EAAGC,GACtC,IAAK,IAAMC,KAAKF,EAAG,GAAIA,EAAEE,KAAOD,EAAEC,GAAI,OAAO,EAC7C,IAAK,IAAMA,KAAKD,EAAG,KAAMC,KAAKF,GAAI,OAAO,EACzC,OAAO,ECDT,WAAiBA,EAAGC,GAClB,OAAID,GAAkB,iBAANA,GACNG,EAAaH,EAAGC,GAEnBD,IAAMC,EAGf,WAAgCG,EAASC,GACvC,IAAMC,KACFC,GAAU,EACd,IAAK,IAAIC,KAAOJ,EACVK,EAAQJ,EAAQG,GAAMJ,EAAQI,MAChCD,GAAU,EACVD,EAAKE,GAAOJ,EAAQI,IAGxB,OAASF,OAAMC,sBClBmBG,EAASC,GAC3C,IAAIC,KACJ,IAAK,IAAIC,KAAQH,YAARG,GACPD,EAAMC,GAAQ,eAAC,aAAAC,mBAAAA,IAAAC,kBACb,IAAIC,EAAMN,EAAQG,SAARH,GAAcC,EAAMM,mBAAeF,IAClC,MAAPC,GAAaL,EAAMO,SAASF,KAH3BH,GAMT,OAAOD,YCET,SAAwBO,EAAWR,EAAOS,GAGxC,aACQ,IAAAC,6BAAEf,oBAKNa,EAAUG,IAAIhB,GARlBiB,IACAJ,EAAUK,GAAG,UAAWb,EAAMc,UAAUF,2BATfZ,EAAOD,GAChC,OAAOgB,EACc,mBAAZhB,EAAyBA,EAAQC,GAASD,EACjDC"}